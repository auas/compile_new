#<center>《编译技术》课程设计</center>
##<center> 14231011  金燊</center>
###<center>2016年   12 月   30 日</center>


###一．需求说明

#### (1) 文法说明
1 ＜程序＞    ::= ［＜常量说明＞］［＜变量说明＞］{＜有返回值函数定义＞|＜无返回值函数定义＞}＜主函数＞程序由说明部分和函数组成。说明有变量说明，常量说明；函数有有返回值的和没返回值的。其中，有且只有一个主函数作为程序的入口。主程序外的常、变量声明，函数定义，均可缺省，注意！！这里的常量说明必须是已经赋值的！！
>样例：
const b = ‘auas’;//常量声明
int a = 1; //变量声明
int func1(int a) //有返回值的函数定义
{
return a*2;
}
void func2();//无返回值的函数定义
	{
printf(“hahaha!~”);
}
int main(){ //主函数，作为程序入口
  printf("this is main func~");
  return 0;
}`

2 ＜标识符＞    ::=  ＜字母＞｛＜字母＞｜＜数字＞｝
标识符一定是字母开头，后面可以跟着字母或数字
>样例：a,a1,a2ae

3＜常量说明＞ ::=  const＜常量定义＞;{ const＜常量定义＞;}
＜常量定义＞   ::=   int＜标识符＞＝＜整数＞{,＜标识符＞＝＜整数＞}
                            | char＜标识符＞＝＜字符＞{,＜标识符＞＝＜字符＞}
常量说明由const标识符开头，后面是常量定义，用分号结束。常量定义是常量类型（int或char类型）标识符和相应的赋值组成。同一个常量类型下，可以声明多个标识符，用逗号分割
>样例：
const int a = 1, b = 2;//声明整型常量，同一个int下，可声明多个，逗号分割
const char ch = ‘auas’;//声明字符型常量

4＜整数＞        ::= ［＋｜－］＜无符号整数＞｜０
＜无符号整数＞  ::= ＜非零数字＞｛＜数字＞｝
＜数字＞   ::= ０｜＜非零数字＞
＜非零数字＞  ::= １｜．．．｜９
＜数字＞   ::= ０｜＜非零数字＞
整数是0或者由+-号（可以缺省）开头的无符号整数组成，无符号整数由非零数字和一个或多个数字组成，开头是非零数字，所有最高位非零
>样例：+1231；-3221；12312；0

5＜变量说明＞  ::= ＜变量定义＞;{＜变量定义＞;}
	＜变量定义＞  ::= ＜类型标识符＞(＜标识符＞|＜标识符＞‘[’＜无符号整数＞‘]’){,(＜标识符＞|＜标识符＞‘[’＜无符号整数＞‘]’) }
	＜类型标识符＞      ::=  int | char
	＜标识符＞    ::=  ＜字母＞｛＜字母＞｜＜数字＞｝
变量说明由分号分割的多个变量定义组成。变量定义，由多个标识符，或数组组成
>样例
int a,array[10];
char b[6];

6＜表达式＞    ::= ［＋｜－］＜项＞{＜加法运算符＞＜项＞}
＜项＞     ::= ＜因子＞{＜乘法运算符＞＜因子＞}
＜因子＞    ::= ＜标识符＞｜＜标识符＞‘[’＜表达式＞‘]’｜＜整数＞|＜字符＞｜＜有返回值函数调用语句＞|‘(’＜表达式＞‘)’
因子需要特别注意的是，可以是由返回值的函数调用语句；可以是用小括号括起来的表达式；也可以是标识符后面跟着中括号括起来的表达式。项是由因子和乘法运算符联合组成的，表达式由正负号（可缺省）和项组成，也可以通过加法运算符连接多个项
>样例：
dist(2,4);//因子可以由由返回值的函数组成
int auas[666];//def array
...//省略若干行
auas[2+4];//因子由数组构成，数组内可用表达式
a*b/c//项由因子通过乘法运算符组成
-a+4*c//表达式可以+-号开头

7＜赋值语句＞   ::=  ＜标识符＞＝＜表达式＞|＜标识符＞‘[’＜表达式＞‘]’=＜表达式＞
赋值语句可以用表达式对普通单变量赋值，也可以对数组的某一项赋值，数组的某一项可以通过表达式的值访问
>样例：
int a,b[100];
a = 3*4+2;//赋值语句可以对普通单变量赋值
b[a]=a*3+a;//赋值语句也可以对数组的特定位置赋值，数组可以通过表达式的值进行访问

8＜条件语句＞  ::=  if ‘(’＜条件＞‘)’＜语句＞［else＜语句＞］
＜条件＞    ::=  ＜表达式＞＜关系运算符＞＜表达式＞｜＜表达式＞ //表达式为0条件为假，否则为真
条件语句由if开头，后面式小括号括起来的条件，条件成立，执行后面的语句，否则跳过这一部分语句，或者进入并执行else中的语句（else可以缺省）
条件可以式表达式通过关系运算符比较得来，也可以是单一的表达式。表达式为0则为假否则为真
>样例：
if(a>b*3){
  printf("true");//条件为真，输出true
}
else{
  printf("false");//条件为假，输出false
}
if(auas){//条件也可以是表达式，else可以缺省
  printf("larger than 0");
}

9＜循环语句＞   ::=  do＜语句＞while ‘(’＜条件＞‘)’ |for‘(’＜标识符＞＝＜表达式＞;＜条件＞;＜标识符＞＝＜标识符＞(+|-)＜步长＞‘)’＜语句＞
＜步长＞::= ＜无符号整数＞ 
循环语句由do-while和for两种类型。do-while型中，do后面是执行的语句，while后面是循环的条件，里面为0时跳出循环，否则退出。因为后判断，所有不论如何，do后面的语句都会执行一遍。For语句先是由小括号括起来的三个用分号分割的语句。第一个是标识符的赋值语句，这里只有一条，中间是退出循环的条件，最后是循环变量的更新。因为先做判断，所以可能不执行后面的语句
>样例：
for(i=1;i<10;i=i+1){//可以加步长
  printf(i*i);//写语句
}
for(i=10;i>0;i=i-1){//也可以减步长
  printf(i*i);//写语句
}
do{
  printf(i*i);//该语句至少被执行1次
}while(i>0)//while

10＜读语句＞    ::=  scanf ‘(’＜标识符＞{,＜标识符＞}‘)’
＜写语句＞    ::=  printf‘(’＜字符串＞,＜表达式＞‘)’|printf ‘(’＜字符串＞‘)’|printf ‘(’＜表达式＞‘)’
读语句由scanf开头，后面是小括号中的，用逗号分割的多个标识符组成
写语句由printf开头，后面小括号中可以是字符串和表达式通过逗号分割，也可以是字符串或表达式
>样例：
int a,b;
scanf(a,b);
printf(a);//小括号中可以是表达式
printf("auas hahaha");//小括号中可以是字符串和表达式通过逗号分割
printf("auas hahaha",b);//小括号中可以是字符串

11＜语句列＞   ::=｛＜语句＞｝
＜语句＞    ::= ＜条件语句＞｜＜循环语句＞｜‘{’＜语句列＞‘}’｜＜有返回值函数调用语句＞; 
                      |＜无返回值函数调用语句＞;｜＜赋值语句＞;｜＜读语句＞;｜＜写语句＞;｜＜空＞;｜＜返回语句＞;
语句列由多条语句组成，语句可以是大括号括起来的语句列，特别的，函数调用语句，赋值语句，读语句，写语句返回语句后面都要加分号。注意：语句可以是空语句加分号
>样例：
int f1{//语句可以是大括号括起来的多个语句
  if(auas){//语句可以是条件语句
    printf("larger than 0");//可以是写语句加分号
    ;//可以是空语句加分号
    }
  i = 1//可以是赋值语句
  return(i);//返回语句
}

12＜返回语句＞   ::=  return[‘(’＜表达式＞‘)’]
返回语句可以由return单独构成，也可以后边跟着用小括号括起来额表达式
>样例：
return//单独的return
return(9*2+a)//return后面加上小括号括起来的表达式

13＜有返回值函数调用语句＞ ::= ＜标识符＞‘(’＜值参数表＞‘)’
＜无返回值函数调用语句＞ ::= ＜标识符＞‘(’＜值参数表＞‘)’
＜值参数表＞   ::= ＜表达式＞{,＜表达式＞}｜＜空＞
有、无返回值的函数调用语句格式相同，值列表可以是逗号分割的多个表达式，也可以是空
>样例：
func1(1,2,3)
func2()//小括号中内容可以缺省

14＜有返回值函数定义＞  ::=  ＜声明头部＞‘(’＜参数＞‘)’ ‘{’＜复合语句＞‘}’
＜无返回值函数定义＞  ::= void＜标识符＞‘(’＜参数＞‘)’‘{’＜复合语句＞‘}’
＜复合语句＞   ::=  ［＜常量说明＞］［＜变量说明＞］＜语句列＞
＜参数＞    ::= ＜参数表＞
＜参数表＞    ::=  ＜类型标识符＞＜标识符＞{,＜类型标识符＞＜标识符＞}| ＜空＞
＜声明头部＞   ::=  int＜标识符＞|char＜标识符＞
有返回值的函数于无返回值的函数相比，将声明头部的void换成了返回的类型，包含int和char两种不同类型。符合语句由常量说明，变量说明和语句列组成，其中常量说明在前，变量说明在后。
>样例：
int dist(int a,int b){
  const auas = 666;//常量说明
  int ret;//变量说明
  if(a>b){//if语句
    ret = a-b;//减法运算
  }
  else{
    ret = b-a;//减法运算
  }
  return ret;//返回语句
}

15＜复合语句＞   ::=  ［＜常量说明＞］［＜变量说明＞］＜语句列＞
＜主函数＞    ::= void main‘(’‘)’ ‘{’＜复合语句＞‘}’
主函数由void main()开头后面由大括号括起来的复合语句构成，复合语句中，依次是常量说明，变量说明，语句。其实常、变量说明可以缺省
>样例：
void main(){
  const int cst = 10; //常量说明
  int a,b,c,counter;//变量说明
  for(glob1=0;glob1<cst;glob1=glob1+1){ //循环语句
    printf("please enter two numbers");
    scanf(a,b);
    result = max_yz(a,b);
    printf("common factor is: ",result);
  }
  
  do{ //循环语句
    printf("enter a number lower than 10");
    scanf(c);
    if (c>10)
      printf("sth wrong,number>10");
    else
      ;
  }while(c>10)
  
  counter = 10; //赋值语句
  do{//循环语句
    counter = counter-1;
    printf("enter do-while at times: ",counter);
  }while(max_yz(counter,c)!=0)
  
  return;//返回语句
}
#### (2) 目标代码说明

#### (3) 优化方案
###二．详细设计
####(1) 程序结构
####(2) 类/方法/函数功能
####(3) 调用依赖关系
####(4) 符号表管理方案
####(5) 存储分配方案
####(6) 四元式设计
####(7) 目标代码生成方案
####(8) 优化方案
####(9) 出错处理
###三．操作说明
####(1) 运行环境
####(2) 操作步骤
###四．测试报告
####(1) 测试程序及测试结果
####(2) 测试结果分析

###五．总结感想